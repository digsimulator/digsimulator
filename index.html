<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>ë“œë¦´ ì—…ê·¸ë ˆì´ë“œ ì‹œìŠ¤í…œ</title>
 <style>
  /* ë°°ê²½ ë° ê¸°ë³¸ í°íŠ¸ */
  body {
    background: linear-gradient(135deg, #74b9ff, #a29bfe);
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    margin: 0;
    padding: 30px;
    display: flex;
    justify-content: center;
    gap: 30px;
    color: #2d3436;
    user-select: none;
  }

  /* ì¢Œ/ì¤‘/ìš° íŒ¨ë„ ê³µí†µ ìŠ¤íƒ€ì¼ */
  #left-panel, #center-panel, #right-panel {
    background: #fff;
    border-radius: 15px;
    box-shadow: 0 8px 20px rgba(0,0,0,0.12);
    padding: 25px 30px;
    display: flex;
    flex-direction: column;
  }

  #left-panel {
    width: 220px;
    gap: 30px;
  }

  #center-panel {
    width: 360px;
    align-items: center;
  }

  #right-panel {
    width: 700px;
  }

  /* ì œëª© */
  h1, h2 {
    font-weight: 700;
    margin: 0 0 25px 0;
    color: #0984e3;
    text-align: center;
    letter-spacing: 1px;
    font-size: 25px
  }

  /* ìƒíƒœì°½ */
  #status {
    font-size: 20px;
    font-weight: 600;
    margin-bottom: 25px;
    color: #636e72;
    user-select: text;
  }

  /* ê²Œì„ ì˜ì—­ */
  #game {
    position: relative;
    width: 320px;
    height: 900px;
    border-radius: 15px;
    border: 3px solid #74b9ff;
    background: #dfe6e9;
    overflow-y: auto;
    overflow-x: hidden;
    box-shadow: inset 0 0 15px #b2bec3;
    scrollbar-width: thin;
    scrollbar-color: #74b9ff #dfe6e9;
  }
  #game::-webkit-scrollbar {
    width: 10px;
  }
  #game::-webkit-scrollbar-track {
    background: #dfe6e9;
    border-radius: 12px;
  }
  #game::-webkit-scrollbar-thumb {
    background-color: #74b9ff;
    border-radius: 12px;
  }

  /* ë“œë¦´ */
#drill {
  position: absolute;
  width: 0;
  height: 0;
  border-left: 30px solid transparent;
  border-right: 30px solid transparent;
  border-top: 60px solid #636e72; /* ì‚¼ê°í˜• ëª¨ì–‘ ë“œë¦´ */
  top: 50px;
  left: 130px;
  cursor: pointer;
  transition: transform 0.15s ease, box-shadow 0.15s ease;
  z-index: 10;
}

/* ì• ë‹ˆë©”ì´ì…˜ ì¶”ê°€ (ì„ íƒ) */
#drill:hover {
  transform: rotate(5deg) scale(1.05);
}

/* ë¶€ì„œì¡Œì„ ë•Œ íš¨ê³¼ */
#drill.broken {
  border-top-color: #e74c3c;
  box-shadow: 0 0 20px red;
}

/*ë“œë¦´ ìŠ¤í‚¨ì„*/
#drill.skin-fire {
  border-top-color: orangered;
  filter: drop-shadow(0 0 10px orange);
  animation: fireGlow 1s infinite;
}

@keyframes fireGlow {
  0% { filter: drop-shadow(0 0 5px orange); }
  50% { filter: drop-shadow(0 0 15px red); }
  100% { filter: drop-shadow(0 0 5px orange); }
}

#drill.skin-ice {
  border-top-color: rgb(38, 111, 221);
  filter: drop-shadow(0 0 10px rgb(80, 189, 223));
  animation: fireGlow 1s infinite;
}

@keyframes fireGlow {
  0% { filter: drop-shadow(0 0 5px rgb)(38, 111, 221); }
  50% { filter: drop-shadow(0 0 15px rgb)(80, 189, 223); }
  100% { filter: drop-shadow(0 0 5px rgb)(38, 111, 221); }
}


  /* ë•… ë ˆì´ì–´ */
  #ground {
    position: relative;
    margin-top: 160px;
    width: 100%;
    border-radius: 0 0 15px 15px;
    overflow: hidden;
  }
  .layer {
    width: 100%;
    height: 40px;
    border-top: 1px solid #b2bec3;
    transition: background-color 0.4s ease;
  }
  .dirt { background: #a0522d; }
  .gravel { background: #636e72; }
  .stone { background: #2d3436; }
  .ice { background: rgb(52, 119, 173)}
  .destroyed { background: #b2bec3 !important; }
  .bedrock { background: #000 !important; }
  .broken { background: #c0392b !important; }

  /* ì—…ê·¸ë ˆì´ë“œ íŒ¨ë„ */
  #upgrades {
    display: flex;
    flex-direction: column;
    gap: 25px;
  }
  .upgrade-block {
    display: flex;
    flex-direction: column;
    gap: 10px;
    background: #dfe6e9;
    padding: 18px 20px;
    border-radius: 15px;
    box-shadow: inset 0 0 10px #b2bec3;
    font-weight: 600;
    font-size: 15px;
    color: #2d3436;
  }

  /* ì—…ê·¸ë ˆì´ë“œ ë²„íŠ¼ */
  button {
    padding: 14px 24px;
    font-size: 18px;
    font-weight: 700;
    border: none;
    border-radius: 12px;
    cursor: pointer;
    background: linear-gradient(45deg, #0984e3, #74b9ff);
    color: white;
    box-shadow: 0 6px 16px rgba(9, 132, 227, 0.7);
    transition: background 0.3s ease, transform 0.2s ease;
  }
  button:hover:not(:disabled) {
    background: linear-gradient(45deg, #74b9ff, #0984e3);
    transform: scale(1.07);
  }
  button:disabled {
    background: #b2bec3;
    cursor: not-allowed;
    box-shadow: none;
    color: #636e72;
  }

  /* ì—…ê·¸ë ˆì´ë“œ ìš”êµ¬ì‚¬í•­ í…ìŠ¤íŠ¸ */
  #powerUpgradeReq, #durabilityUpgradeReq {
    font-size: 15px;
    font-weight: 600;
    color: #0984e3;
    text-align: center;
  }

  /* ì¸ë²¤í† ë¦¬ */
  #inventory {
    display: grid;
    grid-template-columns: repeat(6, 1fr);
    
    gap: 5px;
  }
  .inventory-slot {
    background: #f7f9fc;
    border-radius: 15px;
    border: 2px solid #74b9ff;
    height: 110px;
    width: 110px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 15px;
    font-weight: 600;
    color: #2d3436;
    box-shadow: 0 5px 14px rgba(116, 185, 255, 0.55);
    transition: background-color 0.3s ease;
    user-select: none;
  }
  .inventory-slot:hover {
    background-color: #dff1ff;
  }

  #encyclopedia-panel {
  margin-top: 30px;
  background: #f7f9fc;
  border-radius: 15px;
  padding: 20px;
  box-shadow: inset 0 0 10px #dfe6e9;
  font-size: 15px;
  color: #2d3436;
}

.material-entry {
  padding: 10px 8px;
  border-bottom: 1px solid #dcdde1;
  display: flex;
  justify-content: space-between;
  align-items: center;
}
.material-entry:last-child {
  border-bottom: none;
}

.material-name {
  font-weight: bold;
  font-size: 16px;
}

.material-info {
  font-size: 13px;
  color: #636e72;
}

/* ìŠ¤í‚¨ ëª©ë¡ ì „ì²´ ë°•ìŠ¤ */
#skin-list {
  display: flex;
  flex-direction: column;
  gap: 12px;
  margin-top: 10px;
}

/* ìŠ¤í‚¨ í•­ëª© */
.skin-item {
  display: flex;
  align-items: center;
  gap: 12px;
  font-weight: 600;
  font-size: 16px;
  cursor: pointer;
  padding: 8px 12px;
  border-radius: 10px;
  background: #dfe6e9;
  box-shadow: inset 0 0 8px #b2bec3;
  user-select: none;
  transition: background-color 0.3s ease;
}
.skin-item:hover {
  background-color: #c1d4ff;
}

/* ì²´í¬ í‘œì‹œ */
.skin-item .checkmark {
  width: 20px;
  height: 20px;
  background-color: #27ae60; /* ì´ˆë¡ */
  mask: url('data:image/svg+xml;utf8,<svg fill="white" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M6 10.793l-3.146-3.147-1.414 1.414L6 13.621l8-8-1.414-1.414z"/></svg>') no-repeat center;
  -webkit-mask: url('data:image/svg+xml;utf8,<svg fill="white" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M6 10.793l-3.146-3.147-1.414 1.414L6 13.621l8-8-1.414-1.414z"/></svg>') no-repeat center;
}


</style>

</head>
<body>

<div id="left-panel">
  <div id="upgrades">
    <div class="upgrade-block">
      <button onclick="upgradePower()">ğŸ’ª ê°•ë„ ì—…ê·¸ë ˆì´ë“œ</button>
      <div id="powerUpgradeReq"></div> <!-- ì¬ë£Œ í‘œì‹œ ì˜ì—­ -->
    </div>
    <div class="upgrade-block">
      <button onclick="upgradeDurability()">ğŸ›  ë‚´êµ¬ë„ ì—…ê·¸ë ˆì´ë“œ</button>
      <div id="durabilityUpgradeReq"></div> <!-- ì¬ë£Œ í‘œì‹œ ì˜ì—­ -->
    </div>
    <div class="upgrade-block">
  <button onclick="openSkinShop()">ğŸ¨ ë“œë¦´ ìŠ¤í‚¨ ìƒì </button>
</div>

<div id="skin-shop" style="display:none; margin-top: 20px;">
  <h2>ğŸ›ï¸ ìŠ¤í‚¨ ìƒì </h2>
  <div class="upgrade-block">
    <p><strong>ğŸ”¥ ë¶ˆê½ƒ ìŠ¤í‚¨</strong><br>ê³ ëŒ€í™ x5, ë£¨ë¹„ x5 ì—„ì²­í°ìê°ˆ x1</p>
    <button onclick="buyDrillSkin('fire')">êµ¬ë§¤</button>
    <p><strong>ğŸ§Š ì–¼ìŒ ìŠ¤í‚¨</strong><br>ì°¨ê°€ìš´ì–¼ìŒ x1, ë”°ëœ»í•œì–¼ìŒ x1, ê³ ë“œë¦„ x1, ë“œë¼ì´ì•„ì´ìŠ¤ x1, ëˆˆì†¡ì´ x1, ëˆˆì‚¬ëŒ x1</p>
    <button onclick="buyDrillSkin('ice')">êµ¬ë§¤</button>
  </div>
</div>



  </div>
</div>


<div id="center-panel">
  <h1>ë•…íŒŒê¸° ì‹œë®¬ (Made by ë²”ì„œ)</h1>
  <h1>Ver 1.12 pre release</h1>
  <div id="status">
    ë‚´êµ¬ë„: <span id="durability">9</span> |
    ê°•ë„: <span id="power">1</span> |
    ğŸ’°: <span id="money">0</span>
  </div>
  <div id="game">
    <div id="drill"></div>
    <div id="ground"></div>
  </div>
</div>

<div id="right-panel">
  <h2>--- ì¸ë²¤í† ë¦¬ ---</h2>
  <div id="inventory"></div>

        <div id="encyclopedia-panel">
  <h2>--- ìµœê·¼ ë°œê²¬í•œ ê´‘ë¬¼ ì •ë³´ ---</h2>
  <div id="material-list"></div>
</div>

  <h2 style="margin-top: 40px;">ğŸ¨ ë“œë¦´ ìŠ¤í‚¨ ëª©ë¡</h2>
  <div id="skin-list"></div>
</div>

<script>
  const drill = document.getElementById("drill");
  const game = document.getElementById("game");
  const ground = document.getElementById("ground");
  const durabilityDisplay = document.getElementById("durability");
  const powerDisplay = document.getElementById("power");
  const moneyDisplay = document.getElementById("money");
  const inventoryUI = document.getElementById("inventory");
  const powerUpgradeReqUI = document.getElementById("powerUpgradeReq");
  const durabilityUpgradeReqUI = document.getElementById("durabilityUpgradeReq");
  const discoveredMaterials = new Set();


  const DRILL_SPEED = 2;
  const DRILL_HEIGHT = 60;
  let MAX_DURABILITY = 9;
  let drillPower = 1;
  let money = 0;
  let isFalling = false;
  let durability = MAX_DURABILITY;
  let layers = [];
  let inventory = [];
  let lastMinedMaterial = null;


  const MAX_STACK = 30;
  const INVENTORY_SIZE = 30;

  // ê°•ë„ ì—…ê·¸ë ˆì´ë“œ ë‹¨ê³„ë³„ ì •ë³´ (ë ˆë²¨ 0ë¶€í„° ì‹œì‘)
  const DrillPowerUpgrades = [
    { name: "power1", powerAddition: 1, need: { í™: 10, ë¶€ì‹¯ëŒ: 1 }, money: 10 },
    { name: "power2", powerAddition: 1, need: { í™: 18, ë¶€ì‹¯ëŒ: 4, ê³ ëŒ€í™: 1 }, money: 10 },
    { name: "power3", powerAddition: 2, need: { í™: 24, ë¶€ì‹¯ëŒ: 8, ê³ ëŒ€í™: 5, }, money: 50 },
    { name: "power4", powerAddition: 2, need: { ê³ ëŒ€í™: 3, ìê°ˆ: 20, ì„íƒ„: 1}, money: 100 },
    { name: "power5", powerAddition: 3, need: { ìê°ˆ: 25, ì„íƒ„: 5, ì€: 3, }, money: 200 },
    { name: "power6", powerAddition: 3, need: { ê³ ëŒ€í™: 2, ìê°ˆ: 30, ì„íƒ„: 15, ì€: 15, }, money: 300 },
    { name: "power7", powerAddition: 4, need: { ì„íƒ„: 20, ì€: 20, ëŒ: 3, ì² : 1}, money: 400 },




    // í•„ìš”í•œ ë§Œí¼ ì¶”ê°€ ê°€ëŠ¥
  ];
  let currentPowerLevel = 0;


  // ë‚´êµ¬ë„ ì—…ê·¸ë ˆì´ë“œ ë‹¨ê³„ë³„ ì •ë³´
  const DurabilityUpgrades = [
    { name: "durability1", durabilityAddition: 9, money: 20 },
    { name: "durability2", durabilityAddition: 9, money: 50 },
    { name: "durability4", durabilityAddition: 12, money: 80 },
    { name: "durability3", durabilityAddition: 9, money: 240 },
    { name: "durability4", durabilityAddition: 12, money: 510 },
    { name: "durability4", durabilityAddition: 12, money: 700 },
    // ì¶”ê°€ ê°€ëŠ¥
  ];
  let currentDurabilityLevel = 0;


  
  // ê´‘ë¬¼ ë“œë í™•ë¥ 
  const DropChances = {
    Dirt: [
      { item: "í™", chance: 0.7 },
      { item: "ë¶€ì‹¯ëŒ", chance: 0.2 },
      { item: "ê³ ëŒ€í™", chance: 0.1 }
    ],
    Gravel: [
      { item: "ìê°ˆ", chance: 0.74 },
      { item: "ì„íƒ„", chance: 0.15 },
      { item: "ì€", chance: 0.1 },
      { item: "ì—„ì²­í°ìê°ˆ", chance: 0.01 },

    ],
    Stone: [
      { item: "ëŒ", chance: 0.66 },
      { item: "ì² ", chance: 0.15 },
      { item: "ë‹¤ì´ì•„ëª¬ë“œ", chance: 0.11 },
      { item: "ë£¨ë¹„", chance: 0.08 }
    ],
    Ice: [
      { item: "ì°¨ê°€ìš´ì–¼ìŒ", chance: 0.4 },
      { item: "ë”°ëœ»í•œì–¼ìŒ", chance: 0.2 },
      { item: "ê³ ë“œë¦„", chance: 0.125 },
      { item: "ë“œë¼ì´ì•„ì´ìŠ¤", chance: 0.1 },
      { item: "ëˆˆì†¡ì´", chance: 0.075 },
      { item: "ëˆˆì‚¬ëŒ", chance: 0.05 }
    ]
    
  };

  // ê´‘ë¬¼ ê°€ê²©(ëˆ í™˜ì‚°)
  const DigPrices = {
    í™: { materialName: "í™", diggedPrice: 1 },
    ë¶€ì‹¯ëŒ: { materialName: "ë¶€ì‹¯ëŒ", diggedPrice: 3 },
    ê³ ëŒ€í™: { materialName: "ê³ ëŒ€í™", diggedPrice: 7 },
    ìê°ˆ: { materialName: "ìê°ˆ", diggedPrice: 2 },
    ì„íƒ„: { materialName: "ì„íƒ„", diggedPrice: 4 },
    ì€: { materialName: "ì€", diggedPrice: 6 },
    ëŒ: { materialName: "ëŒ", diggedPrice: 2 },
    ì² : { materialName: "ì² ", diggedPrice: 5 },
    ë‹¤ì´ì•„ëª¬ë“œ: { materialName: "ë‹¤ì´ì•„ëª¬ë“œ", diggedPrice: 10 },
    ë£¨ë¹„: { materialName: "ë£¨ë¹„", diggedPrice: 15 },
    ì—„ì²­í°ìê°ˆ: { materialName: "ì—„ì²­í°ìê°ˆ", diggedPrice: 2 },
    ì°¨ê°€ìš´ì–¼ìŒ: { materialName: "ì°¨ê°€ìš´ì–¼ìŒ", diiggedPrice: 5},
    ë”°ëœ»í•œì–¼ìŒ: { materialName: "ë”°ëœ»í•œì–¼ìŒ", diiggedPrice: 10},
    ê³ ë“œë¦„: { materialName: "ê³ ë“œë¦„", diiggedPrice: 15},
    ë“œë¼ì´ì•„ì´ìŠ¤: { materialName: "ë“œë¼ì´ì•„ì´ìŠ¤", diiggedPrice: 20},
    ëˆˆì†¡ì´: { materialName: "ëˆˆì†¡ì´", diiggedPrice: 30},
    ëˆˆì‚¬ëŒ: { materialName: "ëˆˆì‚¬ëŒ", diiggedPrice: 50}
  };

  // ê´‘ë¬¼ ë“±ì¥ ì‹œ ì¸ë²¤í† ë¦¬ì— ì¶”ê°€ ë° ëˆ íšë“
  function addItemToInventory(item) {
    for (let slot of inventory) {
      if (slot.item === item && slot.count < MAX_STACK) {
        slot.count++;
        lastMinedMaterial = item;
        updateInventoryUI();
        if (DigPrices[item]) money += DigPrices[item].diggedPrice;
        updateUI();
        return;
      }
    }
    if (inventory.length < INVENTORY_SIZE) {
      inventory.push({ item, count: 1 });
      lastMinedMaterial = item;
      updateInventoryUI();
      if (!discoveredMaterials.has(item)) {
      discoveredMaterials.add(item);
      alert(`ğŸŒŸ ìƒˆë¡œìš´ ê´‘ë¬¼ ë°œê²¬: ${item}!`);
      renderMaterialEncyclopedia();
}

      if (DigPrices[item]) money += DigPrices[item].diggedPrice;
      updateUI();

    }
  }

  // ê´‘ë¬¼ ë“œë í™•ë¥  ê³„ì‚°
  function getRandomDrop(type) {
    const drops = DropChances[type];
    const rand = Math.random();
    let total = 0;
    for (let drop of drops) {
      total += drop.chance;
      if (rand <= total) return drop.item;
    }
    return null;
  }

  // ì§€ë©´ ìƒì„±
  function createGround() {
    ground.innerHTML = "";
    layers = [];

    const totalLayers = [
      { count: 10, type: "Dirt", hp: 3 },
      { count: 30, type: "Gravel", hp: 5 },
      { count: 30, type: "Stone", hp: 9 },
      { count: 20, type: "Ice", hp: 20}
    ];

    totalLayers.forEach(({ count, type, hp }) => {
      for (let i = 0; i < count; i++) {
        const div = document.createElement("div");
        div.classList.add("layer", type.toLowerCase());
        div.dataset.hp = hp;
        div.dataset.type = type;
        ground.appendChild(div);
        layers.push(div);
      }
    });

    const bedrock = document.createElement("div");
    bedrock.classList.add("layer", "bedrock");
    bedrock.dataset.hp = "âˆ";
    ground.appendChild(bedrock);
    layers.push(bedrock);

    drill.style.top = "50px";
    game.scrollTop = 0;
    durability = MAX_DURABILITY;
    updateUI();
    drill.classList.remove("broken");
  }

    function updateUI() {
    durabilityDisplay.textContent = durability;
    powerDisplay.textContent = drillPower;
    moneyDisplay.textContent = money;

    if (currentPowerLevel < DrillPowerUpgrades.length) {
      const nextPower = DrillPowerUpgrades[currentPowerLevel];
      const needs = Object.entries(nextPower.need)
        .map(([k,v]) => `${k} x${v}`)
        .join(", ");
      powerUpgradeReqUI.textContent = `${needs}, ğŸ’°${nextPower.money}`;
    } else {
      powerUpgradeReqUI.textContent = "ìµœëŒ€ ë ˆë²¨ ë‹¬ì„±";
    }

    if (currentDurabilityLevel < DurabilityUpgrades.length) {
      const nextDur = DurabilityUpgrades[currentDurabilityLevel];
      durabilityUpgradeReqUI.textContent = `ğŸ’°${nextDur.money}`;
    } else {
      durabilityUpgradeReqUI.textContent = "ìµœëŒ€ ë ˆë²¨ ë‹¬ì„±";
    }
  }
  // UI ì—…ë°ì´íŠ¸ (ë‚´êµ¬ë„, ê°•ë„, ëˆ ë° ì—…ê·¸ë ˆì´ë“œ ë²„íŠ¼ í…ìŠ¤íŠ¸)
function updateUI() {
  durabilityDisplay.textContent = durability;
  powerDisplay.textContent = drillPower;
  moneyDisplay.textContent = money;

  if (currentPowerLevel < DrillPowerUpgrades.length) {
    const nextPower = DrillPowerUpgrades[currentPowerLevel];
    const needs = Object.entries(nextPower.need)
      .map(([k,v]) => `${k} x${v}`)
      .join(", ");
    powerUpgradeReqUI.textContent = `${needs}, ğŸ’°${nextPower.money}`;
  } else {
    powerUpgradeReqUI.textContent = "ìµœëŒ€ ë ˆë²¨ ë‹¬ì„±";
  }

  if (currentDurabilityLevel < DurabilityUpgrades.length) {
    const nextDur = DurabilityUpgrades[currentDurabilityLevel];
    durabilityUpgradeReqUI.textContent = `ğŸ’°${nextDur.money}`;
  } else {
    durabilityUpgradeReqUI.textContent = "ìµœëŒ€ ë ˆë²¨ ë‹¬ì„±";
  }
}

// ë‚´êµ¬ë„ ì—…ê·¸ë ˆì´ë“œ í•¨ìˆ˜
function upgradeDurability() {
  if (currentDurabilityLevel >= DurabilityUpgrades.length) {
    alert("ë‚´êµ¬ë„ ì—…ê·¸ë ˆì´ë“œëŠ” ìµœëŒ€ ë ˆë²¨ì…ë‹ˆë‹¤.");
    return;
  }
  const upgrade = DurabilityUpgrades[currentDurabilityLevel];

  if (money < upgrade.money) {
    alert(`ëˆì´ ë¶€ì¡±í•©ë‹ˆë‹¤. í•„ìš” ê¸ˆì•¡: ${upgrade.money}`);
    return;
  }

  money -= upgrade.money;
  MAX_DURABILITY += upgrade.durabilityAddition;
  durability = MAX_DURABILITY;
  currentDurabilityLevel++;

  updateUI();
  alert(`ë‚´êµ¬ë„ +${upgrade.durabilityAddition}! í˜„ì¬ ë‚´êµ¬ë„: ${MAX_DURABILITY}`);
}

  // ì¸ë²¤í† ë¦¬ UI ì—…ë°ì´íŠ¸
  function updateInventoryUI() {
  inventoryUI.innerHTML = "";
  for (let i = 0; i < INVENTORY_SIZE; i++) {
    const slot = document.createElement("div");
    slot.className = "inventory-slot";

    if (inventory[i]) {
      const { item, count } = inventory[i];
      slot.textContent = `${item} x${count}`;

      // í´ë¦­ ì‹œ ì•„ì´í…œ ë²„ë¦¬ê¸°
      slot.addEventListener("click", () => {
        if (confirm(`${item}ì„(ë¥¼) 1ê°œ ë²„ë¦´ê¹Œìš”?`)) {
          inventory[i].count--;
          if (inventory[i].count <= 0) {
            inventory.splice(i, 1); // ìŠ¬ë¡¯ ì™„ì „íˆ ì œê±°
          }
          updateInventoryUI();
        }
      });
    }

    inventoryUI.appendChild(slot);
  }
}


  // ë“œë¦´ ë–¨ì–´ëœ¨ë¦¬ê¸° ë™ì‘
  function dropDrill() {
    if (isFalling || durability <= 0) return;
    isFalling = true;
    let top = parseInt(drill.style.top);
    const fallInterval = setInterval(() => {
      top += DRILL_SPEED;
      drill.style.top = `${top}px`;
      game.scrollTop = Math.max(0, top - 400);
      const drillBottom = top + DRILL_HEIGHT;
      for (let i = 0; i < layers.length; i++) {
        const layer = layers[i];
        const layerTop = ground.offsetTop + i * 40;
        const layerBottom = layerTop + 40;

        if (!layer.classList.contains("destroyed") && drillBottom >= layerTop && drillBottom <= layerBottom + 5) {
          let hp = layer.dataset.hp === "âˆ" ? Infinity : parseInt(layer.dataset.hp);
          if (hp !== Infinity) {
            hp -= drillPower;
            layer.dataset.hp = hp;
            if (hp <= 0) {
              layer.classList.add("destroyed");
              const drop = getRandomDrop(layer.dataset.type);
              if (drop) addItemToInventory(drop);
            }
          }

          durability--;
          updateUI();
          clearInterval(fallInterval);

          let bounce = 0;
          const bounceInterval = setInterval(() => {
            if (bounce < 5) {
              top -= 5;
              bounce++;
              drill.style.top = `${top}px`;
              game.scrollTop = Math.max(0, top - 400);
            } else {
              clearInterval(bounceInterval);
              isFalling = false;
              if (durability <= 0) drillBroken();
            }
          }, 20);
          return;
        }
      }

      if (top >= game.scrollHeight - DRILL_HEIGHT) {
        clearInterval(fallInterval);
        isFalling = false;
      }
    }, 20);
  }

  // ë“œë¦´ ë¶€ì„œì§ ì²˜ë¦¬
  function drillBroken() {
    drill.classList.add("broken");
    alert("ğŸ’¥ ë“œë¦´ì´ ë¶€ì„œì¡ŒìŠµë‹ˆë‹¤! ë•…ì´ ë³µêµ¬ë©ë‹ˆë‹¤.");
    setTimeout(() => {
      createGround();
    }, 1000);
  }

  // ê°•ë„ ì—…ê·¸ë ˆì´ë“œ í•¨ìˆ˜ (ë‹¨ê³„ë³„ ì¡°ê±´ ê²€ì‚¬ ë° ì‹¤í–‰)
  function upgradePower() {
    if (currentPowerLevel >= DrillPowerUpgrades.length) {
      alert("ê°•ë„ ì—…ê·¸ë ˆì´ë“œëŠ” ìµœëŒ€ ë ˆë²¨ì…ë‹ˆë‹¤.");
      return;
    }
    const upgrade = DrillPowerUpgrades[currentPowerLevel];

    // ì¬ë£Œ ê²€ì‚¬
    for (const itemName in upgrade.need) {
      const requiredCount = upgrade.need[itemName];
      const invItem = inventory.find(i => i.item === itemName);
      if (!invItem || invItem.count < requiredCount) {
        alert(`ì¬ë£Œ ë¶€ì¡±: ${itemName} x${requiredCount}`);
        return;
      }
    }
    // ëˆ ê²€ì‚¬
    if (money < upgrade.money) {
      alert(`ëˆì´ ë¶€ì¡±í•©ë‹ˆë‹¤. í•„ìš” ê¸ˆì•¡: ${upgrade.money}`);
      return;
    }

    // ì¬ë£Œ ì°¨ê°
    for (const itemName in upgrade.need) {
      const requiredCount = upgrade.need[itemName];
      const invItem = inventory.find(i => i.item === itemName);
      invItem.count -= requiredCount;
      if (invItem.count <= 0) {
        inventory = inventory.filter(i => i.count > 0);
      }
    }
    money -= upgrade.money;

    // ê°•ë„ ì¦ê°€
    drillPower += upgrade.powerAddition;
    currentPowerLevel++;

    updateInventoryUI();
    updateUI();
    alert(`ë“œë¦´ ê°•ë„ +${upgrade.powerAddition}! í˜„ì¬ ê°•ë„: ${drillPower}`);
  }

  // ë‚´êµ¬ë„ ì—…ê·¸ë ˆì´ë“œ í•¨ìˆ˜ (ë‹¨ê³„ë³„ ì¡°ê±´ ê²€ì‚¬ ë° ì‹¤í–‰)
  function upgradeDurability() {
    if (currentDurabilityLevel >= DurabilityUpgrades.length) {
      alert("ë‚´êµ¬ë„ ì—…ê·¸ë ˆì´ë“œëŠ” ìµœëŒ€ ë ˆë²¨ì…ë‹ˆë‹¤.");
      return;
    }
    const upgrade = DurabilityUpgrades[currentDurabilityLevel];

    // ëˆ ê²€ì‚¬
    if (money < upgrade.money) {
      alert(`ëˆì´ ë¶€ì¡±í•©ë‹ˆë‹¤. í•„ìš” ê¸ˆì•¡: ${upgrade.money}`);
      return;
    }

    money -= upgrade.money;
    MAX_DURABILITY += upgrade.durabilityAddition;
    durability = MAX_DURABILITY;
    currentDurabilityLevel++;

    updateUI();
    alert(`ë‚´êµ¬ë„ +${upgrade.durabilityAddition}! í˜„ì¬ ë‚´êµ¬ë„: ${MAX_DURABILITY}`);
  }

  drill.addEventListener("click", dropDrill);

  createGround();
  updateUI();

  const materialData = {
  í™: {
    description: "ê°€ì¥ í”í•œ ì¬ë£Œì…ë‹ˆë‹¤.",
    rarity: "â˜…"
  },
  ë¶€ì‹¯ëŒ: {
    description: "í™ì—ì„œ ë‚®ì€ í™•ë¥ ë¡œ ë‚˜ì˜¤ëŠ” ëŒ.",
    rarity: "â˜…â˜…"
  },
  ê³ ëŒ€í™: {
    description: "ì‹œê°„ì´ ë©ˆì¶˜ ë“¯í•œ í™.",
    rarity: "â˜…â˜…â˜…"
  },
  ìê°ˆ: {
    description: "í”í•œ ìê°ˆ ë¶€ì‹¯ëŒë³´ë‹¨ ë”±ë”±.",
    rarity: "â˜…"
  },
  ì„íƒ„: {
    description: "ìê°ˆë³´ë‹¤ ìì£¼ ì“°ì´ëŠ” ëŒë©ì´.",
    rarity: "â˜…â˜…"
  },
  ì€: {
    description: "ë°˜ì§ì´ê³  ë¹„ì‹¼ ì¡°ê°",
    rarity: "â˜…â˜…â˜…"
  },
  ëŒ: {
    description: "ë‹¨ë‹¨í•œ ëŒ. ë‹¤ë¥¸ ê´‘ë¬¼ë³´ë‹¤ íŠ¼íŠ¼í•´ë³´ì„",
    rarity: "â˜…"
  },
  ì² : {
    description: "ê°•í•œ ì¬ë£Œ. ëŒë³´ë‹¤ ë‹¨ë‹¨",
    rarity: "â˜…â˜…â˜…"
  },
  ë‹¤ì´ì•„ëª¬ë“œ: {
    description: "ë°˜ì§ì´ë©´ì„œë„ ì² ë³´ë‹¤ ë‹¨ë‹¨í•œ ê´‘ë¬¼.",
    rarity: "â˜…â˜…â˜…â˜…"
  },
  ë£¨ë¹„: {
    description: "ë¶‰ì€ ë‹¤ì´ì•„ëª¬ë“œ. ê³ ê¸‰ì ¸ë³´ì„",
    rarity: "â˜…â˜…â˜…â˜…â˜…"
  },
  ì—„ì²­í°ìê°ˆ: {
    description: "ê·¸ëƒ¥ í° ìê°ˆ ë§¤ìš° í¬ê·€í•˜ë‹¤.",
    rarity: "â˜…â˜…â˜…â˜…â˜…â˜…"
  },
   ì°¨ê°€ìš´ì–¼ìŒ: {
    description: "ë§ ê·¸ëŒ€ë¡œ ì°¨ê°€ìš´ ì–¼ìŒ.",
    rarity: "â˜…â˜…â˜…"
  },
   ë”°ëœ»í•œì–¼ìŒ: {
    description: "ë§ ê·¸ëŒ€í˜¸ ë”°ëœ»í•œ ì–¼ìŒ.",
    rarity: "â˜…â˜…â˜…â˜…"
  },
   ê³ ë“œë¦„: {
    description: "ê·¸ëƒ¥ í° ìê°ˆ ë§¤ìš° í¬ê·€í•˜ë‹¤.",
    rarity: "â˜…â˜…â˜…â˜…"
  },
   ë“œë¼ì´ì•„ì´ìŠ¤: {
    description: "ê·¸ëƒ¥ í° ìê°ˆ ë§¤ìš° í¬ê·€í•˜ë‹¤.",
    rarity: "â˜…â˜…â˜…â˜…â˜…"
  },
   ëˆˆì†¡ì´: {
    description: "ê·¸ëƒ¥ í° ìê°ˆ ë§¤ìš° í¬ê·€í•˜ë‹¤.",
    rarity: "â˜…â˜…â˜…â˜…â˜…â˜…"
  },
   ëˆˆì‚¬ëŒ: {
    description: "ê·¸ëƒ¥ í° ìê°ˆ ë§¤ìš° í¬ê·€í•˜ë‹¤.",
    rarity: "â˜…â˜…â˜…â˜…â˜…â˜…"
  },
  

};

//ìµœê·¼ ê´‘ë¬¼ ì •ë³´ í‘œì‹œ
function renderMaterialEncyclopedia() {
  const list = document.getElementById("material-list");
  list.innerHTML = "";

  if (lastMinedMaterial && materialData[lastMinedMaterial]) {
    const data = materialData[lastMinedMaterial];
    const div = document.createElement("div");
    div.className = "material-entry";
    div.innerHTML = `
      <div>
        <div class="material-name">${lastMinedMaterial}</div>
        <div class="material-info">${data.description}</div>
      </div>
      <div class="material-info">í¬ê·€ë„: ${data.rarity}</div>
    `;
    list.appendChild(div);
  }
}




// =============================
// ë“œë¦´ ìŠ¤í‚¨ ìƒµ ì—´ê¸°
// =============================
function openSkinShop() {
  const shop = document.getElementById("skin-shop");
  shop.style.display = shop.style.display === "none" ? "block" : "none";
}

// =============================
// í˜„ì¬ ìŠ¤í‚¨ ìƒíƒœ ë° ë³´ìœ  ëª©ë¡
// =============================
let ownedSkins = ["none"]; // í•­ìƒ ê¸°ë³¸ ìŠ¤í‚¨ ì†Œìœ 
let currentSkin = "none";

// =============================
// ëª¨ë“  ìŠ¤í‚¨ ëª©ë¡
// =============================
const availableSkins = [
  { id: "none", name: "ê¸°ë³¸ ìŠ¤í‚¨" },
  { id: "fire", name: "ğŸ”¥ ë¶ˆê½ƒ ìŠ¤í‚¨" },
  { id: "ice", name: "â„ï¸ ì–¼ìŒ ìŠ¤í‚¨" },
];

// =============================
// ë“œë¦´ì— ìŠ¤í‚¨ ì ìš©
// =============================
function applyDrillSkin(skinId) {
  currentSkin = skinId;

  const drill = document.getElementById("drill");
  if (!drill) return;

  drill.className = "drill";
  if (skinId !== "none") {
    drill.classList.add("skin-" + skinId);
  }

  renderSkinList();
}

// =============================
// ìŠ¤í‚¨ ìƒµ ëª©ë¡ ë Œë”ë§
// =============================
function renderSkinList() {
  const skinList = document.getElementById("skin-list");
  skinList.innerHTML = "";

  for (const skin of availableSkins) {
    const div = document.createElement("div");
    div.className = "skin-item";
    div.textContent = skin.name;

    // êµ¬ë§¤ ì—¬ë¶€ì— ë”°ë¼ ìŠ¤íƒ€ì¼ ì¡°ì •
    if (!ownedSkins.includes(skin.id)) {
      div.style.opacity = 0.5;
      div.style.cursor = "not-allowed";
    } else {
      div.addEventListener("click", () => {
        applyDrillSkin(skin.id);
      });
    }

    // ì²´í¬ë§ˆí¬
    if (skin.id === currentSkin) {
      const check = document.createElement("div");
      check.className = "checkmark";
      div.appendChild(check);
    }

    skinList.appendChild(div);
  }
}

// =============================
// ìŠ¤í‚¨ êµ¬ë§¤ ì²˜ë¦¬
// =============================
function buyDrillSkin(skinName) {
  const skinRequirements = {
    fire: { ì—„ì²­í°ìê°ˆ: 1 ,ê³ ëŒ€í™: 5 ,ë£¨ë¹„: 5 },
    ice: { ì°¨ê°€ìš´ì–¼ìŒ: 1, ë”°ëœ»í•œì–¼ìŒ: 1, ê³ ë“œë¦„: 1, ë“œë¼ì´ì•„ì´ìŠ¤: 1, ëˆˆì†¡ì´: 1, ëˆˆì‚¬ëŒ: 1 },
  };

  const skinMessages = {
    fire: "ğŸ”¥ ë¶ˆê½ƒ ë“œë¦´ ìŠ¤í‚¨ì´ êµ¬ë§¤ë˜ê³  ì ìš©ë˜ì—ˆìŠµë‹ˆë‹¤!",
    ice: "ğŸ§Š ì–¼ìŒ ë“œë¦´ ìŠ¤í‚¨ì´ êµ¬ë§¤ë˜ê³  ì ìš©ë˜ì—ˆìŠµë‹ˆë‹¤!",
  };

  const need = skinRequirements[skinName];
  if (!need) {
    alert("ì¡´ì¬í•˜ì§€ ì•ŠëŠ” ìŠ¤í‚¨ì…ë‹ˆë‹¤.");
    return;
  }

  // ì¬ë£Œ í™•ì¸
  for (const [item, count] of Object.entries(need)) {
    const found = inventory.find(i => i.item === item);
    if (!found || found.count < count) {
      alert(`${item}ì´(ê°€) ë¶€ì¡±í•©ë‹ˆë‹¤.`);
      return;
    }
  }

  // ì¬ë£Œ ì°¨ê°
  for (const [item, count] of Object.entries(need)) {
    const found = inventory.find(i => i.item === item);
    found.count -= count;
    if (found.count <= 0) {
      inventory = inventory.filter(i => i.count > 0);
    }
  }

  updateInventoryUI();

  // ë³´ìœ  ëª©ë¡ì— ì¶”ê°€
  if (!ownedSkins.includes(skinName)) {
    ownedSkins.push(skinName);
  }

  // ì ìš©
  applyDrillSkin(skinName);
  alert(skinMessages[skinName]);
  renderSkinList();
  renderMaterialEncyclopedia?.(); // ìˆìœ¼ë©´ ì‹¤í–‰
}

function destroyDrill() {
  alert("ë“œë¦´ì´ íŒŒê´´ë˜ì—ˆìŠµë‹ˆë‹¤! ë•…ì´ ë³µêµ¬ë©ë‹ˆë‹¤.");
  // ëª¨ë°”ì¼ì´ë©´ ìˆ¨ê¸°ì§€ ì•Šë„ë¡
  if (window.innerWidth > 768) {
    document.querySelector('#left-panel').style.display = 'none';
  }
  setTimeout(() => {
    createGround();
    document.querySelector('#left-panel').style.display = '';
  }, 1000);
}



</script>

</body>
</html>
